# OCD your items into a "bag" by Jaseowns
# UO Outlands 
# If you want to adjust for other bags use -info
# Use loot body.razor

@setvar! globalTimeout 650

@setvar! CleanRestock 1
#Option to drop everything before restocking and organise

if CleanRestock = 1
#@ignore backpack
while findtype 3705|30765|3702|31262|3701 backpack 
if findtype "storage shelf|gothic storage shelf" ground -1 -1 2 as shelf
    menu shelf 0
    wft 500
    target self
    wait 200
    gumpclose 3232825965
endif
wait 100
if insysmsg 'That container does not'
    break
endif
endwhile
endif

if not varexist jootbag or not find jootbag backpack 38
    #if counttype "bag" backpack = 1 and findtype "bag" backpack as lootbag
    #    overhead "jootbag: Automatically setting to bag"
    #    sysmsg "jootbag: Automatically setting to bag"
    #    @setvar! jootbag lootbag
    #else
        overhead "jootbag: Select your personal loot bag - where items go from your shelf"
        sysmsg "jootbag: Select your personal loot bag - where items go from your shelf"
        @setvar! jootbag 
    #endif    
endif

clearsysmsg 

if findtype "reagent satchel" self as jatchel
    overhead "Organize Satchel" 88
    menu jatchel 0
endif

if findtype 31262 self as jpotsatchel
    overhead "Organize Potion Satchel" 88
    menu jpotsatchel 0
endif

lift jootbag
drop backpack 0 0 0
wait globalTimeout
#if jootbag = self
    // do nothing
#else
#    dclick jootbag
#    wait 200
#endif

@clearignore

    while findtype "pouch" backpack 38 as item
        overhead "Organize Trapped Pouches" 38
        lift item
        drop backpack 0 0 0
        wait globalTimeout
        if insysmsg "you may pick up an item from here"
            // do nothing
        else
            @ignore item
        endif
    endwhile

// OPEN pouches
#while findtype "pouch" backpack 0 as item
#    overhead "Open Untrapped Pouches" 89
#    dclick item
#    wait globalTimeout
#    @ignore item
#endwhile

@clearignore

### Set our gear as variables
@setvar! jase_shrooms 0

if not varexist jase_righthand
    @setvar! jase_righthand 0
endif
if not varexist jase_lefthand
    @setvar! jase_lefthand 0
endif
if not varexist jase_shoes
    @setvar! jase_shoes 0
endif
if not varexist jase_pants
    @setvar! jase_pants 0
endif
if not varexist jase_shirt
    @setvar! jase_shirt 0
endif
if not varexist jase_head
    @setvar! jase_head 0
endif
if not varexist jase_gloves
    @setvar! jase_gloves 0
endif
if not varexist jase_ring
    @setvar! jase_ring 0
endif
if not varexist jase_talisman
    @setvar! jase_talisman 0
endif
if not varexist jase_neck
    @setvar! jase_neck 0
endif
if not varexist jase_waist
    @setvar! jase_waist 0
endif
if not varexist jase_innertorso
    @setvar! jase_innertorso 0
endif
if not varexist jase_bracelet
    @setvar! jase_bracelet 0
endif
if not varexist jase_face
    @setvar! jase_face 0
endif
if not varexist jase_middletorso
    @setvar! jase_middletorso 0
endif
if not varexist jase_earrings
    @setvar! jase_earrings 0
endif
if not varexist jase_arms
    @setvar! jase_arms 0
endif
if not varexist jase_cloak
    @setvar! jase_cloak 0
endif
if not varexist jase_outertorso
    @setvar! jase_outertorso 0
endif
if not varexist jase_outerlegs
    @setvar! jase_outerlegs 0
endif
if not varexist jase_innerlegs
    @setvar! jase_innerlegs 0
endif
if not varexist jase_onehandedsecondary
    @setvar! jase_onehandedsecondary 0
endif
if not varexist jase_quiver
    @setvar! jase_quiver 0
endif
if not varexist jase_outerbody
    @setvar! jase_outerbody 0
endif
if findtype 3702 backpack as Bag
    @setvar! jase_Bag Bag
endif
if findtype "mushroom" backpack as mushy
    @setvar! jase_shrooms mushy
endif
if findlayer self righthand as item
    @setvar! jase_righthand item
endif
if findlayer self lefthand as item
    @setvar! jase_lefthand item
endif
if findlayer self shoes as item
    @setvar! jase_shoes item
endif
if findlayer self pants as item
    @setvar! jase_pants item
endif
if findlayer self shirt as item
    @setvar! jase_shirt item
endif
if findlayer self head as item
    @setvar! jase_head item
endif
if findlayer self gloves as item
    @setvar! jase_gloves item
endif
if findlayer self ring as item
    @setvar! jase_ring item
endif
if findlayer self talisman as item
    @setvar! jase_talisman item
endif
if findlayer self neck as item
    @setvar! jase_neck item
endif
if findlayer self waist as item
    @setvar! jase_waist item
endif
if findlayer self innertorso as item
    @setvar! jase_innertorso item
endif
if findlayer self bracelet as item
    @setvar! jase_bracelet item
endif
if findlayer self face as item
    @setvar! jase_face item
endif
if findlayer self middletorso as item
    @setvar! jase_middletorso item
endif
if findlayer self earrings as item
    @setvar! jase_earrings item
endif
if findlayer self arms as item
    @setvar! jase_arms item
endif
if findlayer self cloak as item
    @setvar! jase_cloak item
endif
if findlayer self outertorso as item
    @setvar! jase_outertorso item
endif
if findlayer self outerlegs as item
    @setvar! jase_outerlegs item
endif
if findlayer self innerlegs as item
    @setvar! jase_innerlegs item
endif
if findlayer self onehandedsecondary as item
    @setvar! jase_onehandedsecondary item
endif
if findlayer self quiver as item
    @setvar! jase_quiver item
endif
if findlayer self outerbody as item
    @setvar! jase_outerbody item
endif

if jase_righthand = 0 and jase_lefthand = 0
    overhead "We do not see your weapon!" 34
elseif find jase_righthand backpack
    dclick jase_righthand
endif

@clearignore 

if varexist jootbag and find jootbag backpack
    hotkey "Set Grab Item Hotbag"
    wft 500
    target jootbag
endif

hotkey "Set Grab Item Hotbag"
wft 500
target jootbag
