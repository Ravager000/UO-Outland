# Quick Escape through Moongate by Jaseowns
# UO Outlands
# Different flavor of https://outlands.uorazorscripts.com/script/3b44493a-da5e-4259-9b6f-25855b2f0eb2
# Description:
#   Take a moongate, chiv gate or dungeon gate as fast as possible
#   If you add a recall home script on line 15, you will recall
#   After you take the gate.  Check out https://youtu.be/JtWgeyr85uQ
#  
#   01/17/2023 - Added Grey SSC Moongate
#
@clearignore
say "All Follow Me"



#############
# Player gates
#############
while not gumpexists 3899019871 and findtype "blue moongate" ground 0 1 2 as jGate
    dclick jGate
endwhile

if gumpexists 3899019871 and findtype "blue moongate" ground 0 1 2 as jGate
    while gumpexists 3899019871 and findtype "blue moongate" ground 0 1 2 as jGate
        gumpresponse 2 3899019871
        wait 200
    endwhile
    stop
endif

#############
# Chiv gate
#############
while not gumpexists 3899019871 and findtype 30528 ground 2091 1 1 as jGate
    dclick jGate
endwhile

if gumpexists 3899019871 and findtype 30528 ground 2091 1 1 as jGate
    while gumpexists 3899019871 and findtype 30528 ground 2091 1 1 as jGate
        gumpresponse 2 3899019871
        wait 200
    endwhile
    stop
endif

#############
# Town/Dungeon Moongates - yellow, red, death, blue
#############
while not gumpexists 3773199800 and findtype "blue moongate" ground -1 1 2 as jGate
    dclick jGate
endwhile

if gumpexists 3773199800 and findtype "blue moongate" ground -1 1 2 as jGate
    while gumpexists 3773199800 and findtype "blue moongate" ground -1 1 2 as jGate
        gumpresponse 2 3773199800
        wait 200
    endwhile
    if not dead
          script Recal Runebook Room
    endif
    stop
endif

#############
# Grey Moongates - SSC
#############
while not gumpexists 3899019871 and findtype "moongate" ground -1 -1 2 as jGate
    dclick jGate
endwhile

if gumpexists 3899019871 and findtype "moongate" ground -1 -1 2 as jGate
    while gumpexists 3899019871 and findtype "moongate" ground -1 -1 2 as jGate
        gumpresponse 2 3899019871
        wait 200
    endwhile
    stop
endif

#if findtype "moongate" ground -1 1 12 or findtype "blue moongate" ground -1 1 12 as jGate
#    overhead "Move closer!" 34
#    wait 100
#    replay 
#    
#elseif findtype 400|401 'ground' -1 -1 10 as npc
## Script by Chumber [DoS]
## Enters your room from a house steward or inkeeper in range (10 tiles)
#//wait 1000
@clearignore
while findtype 400|401 'ground' -1 -1 10 as npc
    getlabel npc npcLabel
    if 'house steward' in npcLabel or 'innkeeper' in npcLabel
        //  overhead "Found ya!" 88 npc
    say "Room"
        menu npc 1
        waitforgump 2393832411
        if ingump "Enter Your Room" 2393832411
            //   overhead "Charly"
            gumpresponse 4
            stop
        elseif 'innkeeper' in npcLabel
            //  overhead "Alan"
            gumpresponse 5
        else
            // overhead "Alan"
            gumpresponse 2
        endif
        waitforgump 2393832411
        gumpresponse 100
        stop
    endif
    @ignore npc
endwhile
#overhead "No inkeeper or house steward in range"
#else
overhead "Nothing to escape"
replay
#endif